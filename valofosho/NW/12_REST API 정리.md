# 🌐 REST API 정리

## 💡 1. REST란?

> **REST (Representational State Transfer)**
> 자원을 이름(URI)으로 구분하고, HTTP 프로토콜을 통해 해당 자원의 상태를 주고받는 **아키텍처 스타일**입니다.

즉, **웹의 기본 규칙(HTTP)을 활용해 일관성 있게 자원(Resource)을 관리하는 설계 방식**입니다.

---

## 🧩 2. REST의 핵심 개념

| 용어                         | 의미                        | 예시                                |
| -------------------------- | ------------------------- | --------------------------------- |
| **Resource (자원)**          | 서버에 존재하는 데이터 또는 서비스       | `/users`, `/posts/3`              |
| **URI (자원의 식별자)**          | 자원을 식별하는 고유한 주소           | `https://api.example.com/users/1` |
| **Representation (표현)**    | 자원의 실제 데이터 형태             | JSON, XML, HTML 등                 |
| **State Transfer (상태 전송)** | 클라이언트 ↔ 서버 간 자원의 상태를 주고받음 | 요청 시 필요한 상태(데이터)를 전송              |

---

## ⚙️ 3. REST의 구성요소

| 구성요소               | 설명                                       |
| ------------------ | ---------------------------------------- |
| **Client**         | 요청을 보내는 주체 (웹, 모바일 앱 등)                  |
| **Server**         | 요청을 처리하고 응답을 제공하는 시스템                    |
| **Resource**       | URI로 식별되는 데이터 또는 서비스                     |
| **Representation** | 자원의 실제 데이터(JSON/XML)                     |
| **HTTP Method**    | 자원에 수행할 작업 정의 (GET, POST, PUT, DELETE 등) |

---

## 🚦 4. HTTP 메서드 (CRUD 매핑)

| Method     | 역할            | 설명            | 예시 URI               | 응답 상태 코드                    |
| ---------- | ------------- | ------------- | -------------------- | --------------------------- |
| **GET**    | 조회(Read)      | 자원 조회         | `/users`, `/users/1` | `200 OK`                    |
| **POST**   | 생성(Create)    | 자원 생성         | `/users`             | `201 Created`               |
| **PUT**    | 전체 수정(Update) | 자원 전체 수정      | `/users/1`           | `200 OK` / `204 No Content` |
| **PATCH**  | 부분 수정(Update) | 자원의 일부 필드만 수정 | `/users/1`           | `200 OK`                    |
| **DELETE** | 삭제(Delete)    | 자원 삭제         | `/users/1`           | `204 No Content`            |

---

## 🧱 5. REST API의 설계 원칙 (6가지 제약조건)

| 원칙                                    | 설명                                             |
| ------------------------------------- | ---------------------------------------------- |
| **1️⃣ Client-Server 구조**              | 클라이언트와 서버의 역할을 분리 (UI ↔ 데이터 처리 분리)             |
| **2️⃣ Stateless (무상태성)**              | 요청 간 상태를 서버에 저장하지 않음 — 모든 요청은 독립적              |
| **3️⃣ Cacheable (캐시 가능)**             | 응답은 캐시를 통해 성능 향상 가능                            |
| **4️⃣ Uniform Interface (일관된 인터페이스)** | URI 규칙과 메서드 사용 일관성 유지                          |
| **5️⃣ Layered System (계층화 구조)**       | 로드밸런서, 프록시, 게이트웨이 등 중간 계층 가능                   |
| **6️⃣ Code on Demand (선택적)**          | 서버가 실행 가능한 코드(예: JS)를 클라이언트로 전송 가능 (잘 사용되진 않음) |

---

## 🔗 6. RESTful API란?

> REST 원칙을 잘 지켜서 설계된 API를 **RESTful API** 라고 부릅니다.
> 즉, “REST의 제약조건을 준수하는 HTTP 기반의 API 설계 방식”

✅ **RESTful API는 단순히 REST를 사용한다고 해서 자동으로 되는 것이 아님!**
URI 설계, 메서드 활용, 응답 규칙 등 REST 철학을 따라야 함.

---

## 🧭 7. RESTful API 설계 규칙

| 규칙                      | 설명                | 예시 (✅ 권장 / ❌ 비권장)                            |
| ----------------------- | ----------------- | -------------------------------------------- |
| **URI는 자원을 표현**         | 동사는 쓰지 않고 명사를 사용  | ✅ `/users` / ❌ `/getUsers`                   |
| **소문자, 하이픈 사용**         | 일관된 네이밍           | ✅ `/user-profiles` / ❌ `/UserProfiles`       |
| **복수형 사용**              | 자원 컬렉션은 복수형       | ✅ `/users` / ❌ `/user`                       |
| **계층 구조 표현**            | 관계를 슬래시(`/`)로 표현  | `/users/1/orders/3`                          |
| **HTTP 상태코드 활용**        | 요청 결과를 코드로 명확히 표현 | `200 OK`, `404 Not Found`, `400 Bad Request` |
| **필터링/정렬/검색은 쿼리스트링 사용** |                   | `/users?age=20&sort=name`                    |

---

## 📦 8. 응답(Response) 예시 (JSON)

```json
// ✅ GET /users/1 응답 예시
{
  "id": 1,
  "name": "김동현",
  "email": "donghyun@example.com",
  "created_at": "2025-11-03T09:00:00Z"
}
```

```json
// ✅ POST /users 요청 결과
{
  "message": "User created successfully",
  "user_id": 1
}
```

```json
// ❌ 잘못된 요청 (400)
{
  "error": "Invalid email format"
}
```

---

## 🧠 9. REST API의 장단점

| 구분     | 장점                                                  | 단점 |
| ------ | --------------------------------------------------- | -- |
| **장점** | 단순하고 일관된 인터페이스, 확장성 우수, HTTP 기반으로 범용적               |    |
| **단점** | 요청마다 연결 필요(Stateless), 실시간 양방향 통신에 비효율적, 오버헤드 발생 가능 |    |

---

## ⚔️ 10. REST vs 다른 API 스타일

| 구분     | REST                           | GraphQL     | gRPC             |
| ------ | ------------------------------ | ----------- | ---------------- |
| 데이터 요청 | 여러 엔드포인트                       | 단일 엔드포인트    | 메서드 호출 기반        |
| 데이터 크기 | 필요 이상의 데이터 전송 가능               | 필요한 데이터만 선택 | 효율적 바이너리 전송      |
| 통신 포맷  | JSON / XML                     | JSON        | Protocol Buffers |
| 장점     | 단순, 범용성 높음                     | 유연한 쿼리      | 고성능, 실시간 적합      |
| 단점     | Over-fetching / Under-fetching | 복잡한 스키마 관리  | 언어별 구현 부담        |

---

## 🧩 11. REST API 설계 예시 구조

```
📦 /api/v1
 ┣ 📂 users
 ┃ ┣ GET /users           → 모든 사용자 조회
 ┃ ┣ POST /users          → 사용자 생성
 ┃ ┣ GET /users/{id}      → 특정 사용자 조회
 ┃ ┣ PUT /users/{id}      → 사용자 전체 수정
 ┃ ┣ PATCH /users/{id}    → 사용자 일부 수정
 ┃ ┗ DELETE /users/{id}   → 사용자 삭제
 ┗ 📂 posts
    ┣ GET /posts          → 게시글 목록 조회
    ┗ POST /posts         → 게시글 작성
```

---

## 🧭 12. RESTful API 설계 Best Practices

* 버전 관리: `/api/v1/` 처럼 버전 명시
* 표준 상태코드 사용 (`2xx`, `4xx`, `5xx`)
* 에러 메시지는 일관된 JSON 포맷으로 반환
* 필터링, 페이지네이션, 정렬 지원 (`?page=1&limit=20&sort=desc`)
* 보안: HTTPS, 인증(JWT, OAuth 2.0) 적용
* Rate Limit 적용으로 요청 남용 방지

---

## 📘 요약

| 핵심 포인트       | 설명                                |
| ------------ | --------------------------------- |
| REST란        | HTTP 기반 자원 중심 아키텍처                |
| RESTful API란 | REST 원칙을 준수한 설계된 API              |
| 주요 메서드       | GET / POST / PUT / PATCH / DELETE |
| 설계 원칙        | 명확한 URI, 일관된 상태 코드, Stateless     |
| 장점           | 단순, 확장성 우수                        |
| 단점           | 요청 오버헤드, 실시간성 부족                  |

---
