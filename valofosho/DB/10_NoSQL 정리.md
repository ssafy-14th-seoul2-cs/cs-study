# 📘 NoSQL (Not Only SQL) 정리

> **관계형 데이터베이스(RDBMS)의 한계를 해결하기 위해 등장한 비(非)관계형 데이터 저장 기술**
> → “SQL만으로는 해결하기 어려운 대규모 데이터·유연한 스키마·수평 확장이 필요한 경우 사용”

---

# 1️⃣ 왜 NoSQL이 필요한가? (등장 배경)

### ✔ RDB가 어려운 상황

* **대규모 트래픽**(페이스북, 유튜브, 인스타 등)
* **수평 확장 어려움**
* **데이터 형식이 다양**(문서, 이미지, 로그 등)
* **스키마 고정 → 변경 비용 큼**
* 조인(Join) 복잡 → 성능 저하

### ✔ NoSQL의 특징

| 특징                     | 설명                          |
| ---------------------- | --------------------------- |
| **Schema-less**        | 고정 스키마 없음 → 자유롭게 구조 변경      |
| **Horizontal Scaling** | 서버 여러 개로 확장 쉬움              |
| **고성능 읽기/쓰기**          | 특정 패턴에 최적화(캐시, 로그 등)        |
| **유연한 데이터 모델**         | 문서, Key-Value, 그래프 등 다양한 모델 |
| **CAP에서 AP 선호 경향**     | 높은 가용성/확장성                  |

---

# 2️⃣ NoSQL 4대 분류 (핵심)

NoSQL은 스토리지 구조에 따라 4가지로 나뉜다.

---

## ① Key–Value Store (가장 단순하고 빠름)

```
key: "user_1"
value: {"name": "donghyun", "age": 25}
```

### ✔ 특징

* key로 value를 바로 찾는 구조
* 초고속 읽기/쓰기
* 캐시·세션 저장에 최적

### ✔ 대표 DB

* Redis
* DynamoDB
* Riak

### ✔ 사용 예

* 세션 캐싱
* 실시간 랭킹
* AI inference caching

---

## ② Document Store (가장 많이 사용됨)

> JSON 형태로 데이터를 저장하는 DB
> → 유연한 문서 구조, 스키마 자유도 매우 높음

### ✔ 예시

```json
{
  "user_id": 1,
  "name": "donghyun",
  "hobbies": ["coding", "music"]
}
```

### ✔ 장점

* 유연한 스키마
* 직관적인 구조(JSON)
* 빠름 + 대규모 데이터 처리 가능
* 수평 확장 쉬움

### ✔ 대표 DB

* MongoDB
* CouchDB
* Firestore

### ✔ 사용 예

* 회원 프로필 정보
* 로그 저장
* 전자상거래 카탈로그

---

## ③ Column Family Store (대규모 분산 DB)

> 구글 BigTable에서 유래
> “Row 기준이 아니라 Column 패밀리 단위로 데이터 저장”

### ✔ 특징

* 특정 컬럼만 읽을 때 압도적 성능
* 대규모 분산 환경에 최적화
* AP 지향 (가용성, 파티션 허용)

### ✔ 대표 DB

* Apache Cassandra
* HBase
* BigTable

### ✔ 사용 예

* 로그 데이터
* IoT 센서 데이터
* 시계열 데이터 (Time-series)
* 검색 엔진 인덱스

---

## ④ Graph DB (관계 데이터 최적화)

> 노드(Node)와 간선(Edge)로 구성된 그래프 기반 DB

```
(A) ---친구---> (B)
```

### ✔ 장점

* 관계(연결성)가 중요한 경우 최강
* 복잡한 관계 조회가 빠름

### ✔ 대표 DB

* Neo4j
* Amazon Neptune

### ✔ 사용 예

* 추천 시스템
* 소셜 그래프
* 네트워크 분석
* 지식 그래프 (Knowledge Graph)

---

# 3️⃣ NoSQL vs SQL 비교표

| 항목      | SQL             | NoSQL                          |
| ------- | --------------- | ------------------------------ |
| 데이터 모델  | 테이블, 스키마 고정     | 문서/Key-value/Graph 등           |
| 스키마     | 고정              | 유연함                            |
| 확장성     | 수직 확장(Scale-Up) | 수평 확장(Scale-Out)               |
| 트랜잭션    | 강한 ACID         | 대부분 AP or eventual consistency |
| Join    | 지원              | 대부분 실패(비추천)                    |
| 적합한 데이터 | 정형 데이터          | 비정형·반정형 데이터                    |
| 사용 사례   | 금융, 회계          | SNS, 로그, 실시간 서비스               |

---

# 4️⃣ NoSQL과 CAP 이론

많은 NoSQL 시스템은 CAP 중 **AP 모델**을 지향함.

| DB        | CAP                     |
| --------- | ----------------------- |
| Cassandra | AP                      |
| DynamoDB  | AP                      |
| MongoDB   | CP (선택적 AP)             |
| Redis     | AP(클러스터 모드) / CA(싱글 노드) |

즉,

> NoSQL = “정합성을 약간 희생하고 가용성과 확장성을 극대화”

---

# 5️⃣ 언제 NoSQL을 쓰면 좋을까?

### 사용 적합

* 대규모 트래픽
* 빠른 읽기/쓰기
* 스키마가 자주 바뀜
* JSON 기반 데이터
* 로그, 캐싱
* 분산 환경이 필수

### 사용 비적합

* 복잡한 조인
* 강한 일관성 필수
* 트랜잭션 중심(금융/결제)
* 스키마가 매우 안정적
* SQL 기능이 중요한 경우

---

# 6️⃣ NoSQL 사례 기반 요약

| 상황          | 적합한 DB               |
| ----------- | -------------------- |
| 세션 캐싱       | Redis (Key-Value)    |
| SNS 피드      | MongoDB (Document)   |
| IoT 시계열 데이터 | Cassandra (Column)   |
| 추천 시스템      | Neo4j (Graph)        |
| 대규모 로그 저장   | BigTable / Cassandra |

---