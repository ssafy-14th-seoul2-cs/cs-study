# REST API와 RESTful API

## 들어가기 앞서

REST API를 이해하기 위해서는 먼저 다음 개념들을 알아야 함:
- **HTTP 메서드**: GET, POST, PUT, DELETE 등의 요청 방식
- **URI(Uniform Resource Identifier)**: 자원을 식별하는 고유한 주소
- **클라이언트-서버 구조**: 요청을 보내는 측과 처리하는 측의 분리

---

## REST란?

**Representational State Transfer**의 약자로, 자원을 이름으로 구분하여 해당 자원의 상태를 주고받는 모든 것을 의미함.

### REST의 핵심 개념

**1. 자원(Resource) - URI**
- 모든 자원에는 고유한 ID가 존재하고, 이 자원은 서버에 존재함
- 자원을 구별하는 ID는 `/users/:user_id`와 같은 HTTP URI
- 클라이언트는 URI를 이용해 자원을 지정하고 해당 자원의 상태에 대한 조작을 서버에 요청

**2. 행위(Verb) - HTTP Method**
- HTTP 프로토콜의 메서드를 사용
- GET: 자원 조회
- POST: 자원 생성
- PUT: 자원 전체 수정
- PATCH: 자원 일부 수정
- DELETE: 자원 삭제

**3. 표현(Representation)**
- 클라이언트가 자원의 상태에 대한 조작을 요청하면 서버는 이에 적절한 응답을 보냄
- REST에서 하나의 자원은 JSON, XML, TEXT 등 여러 형태의 표현으로 나타낼 수 있음
- 현재는 JSON을 주로 사용

---

## REST의 특징

### 1. Stateless (무상태성)
- 서버는 각각의 요청을 완전히 별개의 것으로 인식하고 처리
- 각 API 서버는 클라이언트의 요청만을 단순 처리
- 이전 요청이 다음 요청의 처리에 연관되어서는 안 됨
- 서버의 처리 방식에 일관성을 부여하고 부담을 줄임

### 2. Cacheable (캐시 처리 가능)
- HTTP 프로토콜의 캐싱 기능을 그대로 사용
- Last-Modified 태그나 E-Tag를 이용해 캐싱 구현
- 대량의 요청을 효율적으로 처리 가능

### 3. Client-Server 구조
- 자원을 가진 쪽이 서버, 자원을 요청하는 쪽이 클라이언트
- 서버는 API를 제공하고 클라이언트는 사용자 인증이나 세션 등을 직접 관리
- 역할이 명확히 구분되어 서로 간 의존성이 줄어듦

### 4. Uniform Interface (인터페이스 일관성)
- URI로 지정한 자원에 대한 조작을 통일되고 한정적인 인터페이스로 수행
- HTTP 표준 프로토콜을 따르는 모든 플랫�폼에서 사용 가능
- 특정 언어나 기술에 종속되지 않음

### 5. Layered System (계층화)
- 클라이언트는 REST API 서버만 호출
- REST 서버는 다중 계층으로 구성될 수 있음
- 로드밸런싱, 암호화 계층을 추가해 구조상의 유연성을 둘 수 있음
- PROXY, 게이트웨이 같은 네트워크 기반의 중간매체를 사용할 수 있음

### 6. Self-Descriptiveness (자체 표현)
- REST API 메시지만 보고도 이를 쉽게 이해할 수 있는 자체 표현 구조로 되어있음

---

## REST API란?

**REST의 원리를 따르는 API**를 의미함.

### REST API 설계 규칙

**1. URI는 자원을 표현해야 함**
```
# 좋은 예
GET /users/1

# 나쁜 예
GET /users/show/1
GET /users/delete/1
```
- 자원을 표현하는데 집중
- 행위에 대한 표현이 들어가서는 안 됨

**2. 자원에 대한 행위는 HTTP Method로 표현**
```
# 회원 정보 조회
GET /users/1

# 회원 추가
POST /users

# 회원 수정
PUT /users/1

# 회원 삭제
DELETE /users/1
```

**3. 슬래시(/)는 계층 관계를 나타냄**
```
GET /users/1/orders
```

**4. URI 마지막 문자로 슬래시를 포함하지 않음**
```
# 좋은 예
GET /users

# 나쁜 예
GET /users/
```

**5. 하이픈(-)은 가독성을 높이는데 사용**
```
GET /user-profiles
```

**6. 언더바(_)는 사용하지 않음**
- 밑줄은 보기 어렵거나 문자가 가려지기도 함

**7. URI 경로는 소문자로 작성**
```
# 좋은 예
GET /users/profiles

# 나쁜 예
GET /Users/Profiles
```

**8. 파일 확장자는 URI에 포함하지 않음**
```
# 좋은 예
GET /users/photo
Accept: image/jpg

# 나쁜 예
GET /users/photo.jpg
```

**9. 컬렉션과 도큐먼트**
- 컬렉션: 객체의 집합 (복수형 사용)
- 도큐먼트: 객체 (단수형 사용)
```
GET /users/1/devices/5
```
- users: 컬렉션
- 1: 도큐먼트
- devices: 컬렉션
- 5: 도큐먼트

---

## RESTful API란?

**REST의 설계 규칙을 잘 지켜서 설계된 API**를 RESTful한 API라고 함.

### RESTful의 목적
- 이해하기 쉽고 사용하기 쉬운 REST API를 만드는 것
- 일관적인 컨벤션을 통한 API의 이해도 및 호환성을 높이는 것
- 성능 향상이 목적이 아님

### RESTful하지 못한 경우

```
# 나쁜 예 1: URI에 행위 표현
GET /users/delete/1

# 나쁜 예 2: CRUD 기능을 모두 POST로만 처리
POST /users/create
POST /users/update
POST /users/delete

# 나쁜 예 3: 자원과 행위가 섞임
GET /users/1/update-name
```

이런 경우들은 REST API의 설계 규칙을 올바르게 지키지 못한 것으로 RESTful하지 못함.

---

## 핵심 정리

**REST API**
- REST 아키텍처의 제약 조건을 준수하는 API
- 자원(URI), 행위(HTTP Method), 표현으로 구성

**RESTful API**
- REST API 설계 가이드를 잘 따라 만든 API
- 직관적이고 이해하기 쉬운 API 설계가 목표

**REST의 6가지 원칙**
1. Stateless
2. Cacheable
3. Client-Server
4. Uniform Interface
5. Layered System
6. Self-Descriptiveness

**설계 시 주의사항**
- URI는 자원만 표현
- 행위는 HTTP Method로 표현
- 일관성 있는 네이밍 규칙 사용