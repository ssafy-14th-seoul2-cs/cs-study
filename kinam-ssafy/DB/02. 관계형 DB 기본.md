# 관계형 데이터베이스 (RDBMS)

## 들어가기 앞서

관계형 데이터베이스를 이해하기 위해 먼저 알아야 할 개념:
- **테이블**: 행과 열로 구성된 2차원 구조
- **키(Key)**: 데이터를 고유하게 식별하는 값
- **관계(Relation)**: 테이블 간의 논리적 연결
- **SQL**: 데이터베이스를 조작하는 표준 언어

---

## 관계형 데이터베이스란?

**데이터를 테이블(행과 열)로 구조화하고, 테이블 간의 관계를 통해 데이터를 연결하는 데이터베이스**

### 핵심 개념

**테이블 구조**
- 데이터를 스프레드시트처럼 행과 열로 저장
- 각 열(Column)은 속성(Attribute)을 나타냄
- 각 행(Row)은 레코드(Record 또는 튜플)를 나타냄

**사전 정의된 관계**
- 테이블을 조인하여 정보 간의 관계나 링크를 설정
- 여러 데이터 포인트 간의 관계를 쉽게 이해 가능

---

## 관계형 데이터베이스의 탄생

### E.F. Codd의 관계형 모델 (1970년대, IBM)

**이전 방식 (계층형)**
- 데이터를 트리 구조로 저장
- 구조 변경이 어려움
- 데이터 재구성 시 전체 구조를 바꿔야 함

**Codd의 제안**
- 테이블을 재구성하지 않고 데이터를 저장, 액세스, 연결
- 공통 속성을 사용하여 모든 테이블을 다른 테이블과 연관
- 데이터의 물리적 저장과 논리적 표현을 분리

---

## 관계형 데이터베이스의 구성 요소

### 1. 테이블 (Table = Relation)

**구조**
```
고객 테이블
+----------+--------+----------+--------+
| 고객ID   | 이름   | 이메일   | 도시   |
+----------+--------+----------+--------+
| 1        | 김철수 | kim@...  | 서울   |
| 2        | 이영희 | lee@...  | 부산   |
+----------+--------+----------+--------+
```

**특징**
- 열(Column): 데이터 유형을 지정하는 속성
- 행(Row): 구체적인 데이터 값을 포함하는 레코드

---

### 2. 기본 키 (Primary Key)

**정의**
- 각 행을 고유하게 식별하는 속성
- 관계형 데이터베이스의 모든 테이블에 존재

**특징**
- 중복 값을 가질 수 없음 (UNIQUE)
- NULL 값을 가질 수 없음 (NOT NULL)
- 테이블당 하나만 존재

**예시**
```
고객 테이블의 기본 키: 고객ID
주문 테이블의 기본 키: 주문ID
```

---

### 3. 외래 키 (Foreign Key)

**정의**
- 다른 테이블의 기본 키를 참조하는 속성
- 테이블 간의 관계를 만드는 데 사용

**예시**
```
주문 테이블
+--------+-----------+----------+----------+
| 주문ID | 고객ID(FK)| 제품명   | 수량     |
+--------+-----------+----------+----------+
| 101    | 1         | 노트북   | 1        |
| 102    | 2         | 마우스   | 2        |
+--------+-----------+----------+----------+
```

여기서 고객ID는 고객 테이블의 기본 키를 참조하는 외래 키.

---

## 테이블 간 관계 예시

### 고객-주문 관계

**고객 테이블**
```
+--------+--------+----------+
| 고객ID | 이름   | 이메일   |
+--------+--------+----------+
| 1      | 김철수 | kim@...  |
| 2      | 이영희 | lee@...  |
+--------+--------+----------+
기본 키: 고객ID
```

**주문 테이블**
```
+--------+-----------+----------+------------+
| 주문ID | 고객ID(FK)| 제품명   | 주문날짜   |
+--------+-----------+----------+------------+
| 101    | 1         | 노트북   | 2025-01-15 |
| 102    | 1         | 마우스   | 2025-01-16 |
| 103    | 2         | 키보드   | 2025-01-17 |
+--------+-----------+----------+------------+
기본 키: 주문ID
외래 키: 고객ID (고객 테이블 참조)
```

**관계 설정**
- 주문 테이블의 고객ID(외래 키)가 고객 테이블의 고객ID(기본 키)를 참조
- 이를 통해 어떤 고객이 어떤 주문을 했는지 연결 가능

**활용 예시**
- 특정 날짜에 구매한 모든 고객 조회
- 지난 달 배송이 지연된 고객 파악
- 고객별 총 구매 금액 계산

---

## 선언적 쿼리

**특징**
- 데이터가 사전 정의된 관계로 구성되어 있어 선언적으로 쿼리 가능
- "어떻게(How)" 가져올지가 아닌 "무엇을(What)" 가져올지만 정의

**예시**
```sql
-- 김철수가 주문한 모든 제품 조회
SELECT 제품명, 주문날짜
FROM 주문
JOIN 고객 ON 주문.고객ID = 고객.고객ID
WHERE 고객.이름 = '김철수';
```

시스템이 알아서 어떻게 데이터를 가져올지 결정함.

---

## RDBMS (관계형 데이터베이스 관리 시스템)

**정의**
- 관계형 데이터베이스를 생성, 업데이트, 관리하는 프로그램

**주요 RDBMS**
- MySQL
- PostgreSQL
- Oracle Database
- Microsoft SQL Server
- MariaDB

**클라우드 기반 RDBMS**
- Google Cloud SQL
- Amazon RDS
- Azure SQL Database
- Google Cloud Spanner
- Google AlloyDB

---

## 관계형 데이터베이스의 장점

### 1. 유연성
- 전체 데이터베이스 구조를 변경하지 않고 테이블, 관계를 추가/수정/삭제 가능
- 기존 애플리케이션에 영향을 주지 않고 데이터 변경 가능

### 2. ACID 규정 준수

**ACID란?**
- **Atomicity (원자성)**: 트랜잭션의 모든 연산이 완전히 수행되거나 전혀 수행되지 않음
- **Consistency (일관성)**: 트랜잭션 실행 전후로 데이터베이스가 일관된 상태 유지
- **Isolation (격리성)**: 동시에 실행되는 트랜잭션들이 서로 영향을 주지 않음
- **Durability (내구성)**: 트랜잭션이 완료되면 그 결과가 영구적으로 저장됨

**효과**
- 오류, 실패 또는 기타 잠재적 오작동에 관계없이 데이터 유효성 보장

### 3. 사용 편의성
- SQL을 사용하여 복잡한 쿼리를 쉽게 실행
- 기술자가 아닌 사용자도 데이터베이스와 상호작용 가능

### 4. 공동작업
- 여러 사용자가 동시에 데이터를 운영하고 액세스 가능
- 기본 제공 잠금(Locking) 기능으로 데이터 무결성 보장

### 5. 기본 제공 보안 기능
- 역할 기반 보안을 통해 데이터 액세스를 특정 사용자로 제한
- 사용자 권한 관리

### 6. 데이터베이스 정규화
- 데이터 중복성을 줄임
- 데이터 무결성을 향상시킴

---

## 관계형 데이터베이스의 활용 분야

**대량의 정형 데이터 관리가 필요한 조직에서 주로 사용**

### 주요 활용 사례
1. **인벤토리 추적**: 재고 관리, 창고 관리
2. **트랜잭션 데이터 처리**: 금융 거래, 주문 처리
3. **애플리케이션 로깅**: 사용자 활동 기록
4. **고객 관계 관리(CRM)**: 고객 정보 관리
5. **전자 상거래**: 제품, 주문, 고객 정보 관리
6. **인사 관리**: 직원 정보, 급여 관리

---

## 관계형 DB vs 비관계형 DB (NoSQL)

### 관계형 데이터베이스

**데이터 저장 방식**
- 규칙 기반의 테이블 형식
- 사전 정의된 스키마 필요
- 정형 데이터에 최적화

**장점**
- 데이터 무결성 보장
- 복잡한 관계 표현 가능
- 트랜잭션 지원

**적합한 경우**
- 데이터 구조가 명확하고 자주 변경되지 않을 때
- 데이터 간 관계가 중요할 때
- ACID 속성이 필요할 때

### 비관계형 데이터베이스 (NoSQL)

**데이터 저장 방식**
- 연결되지 않은 개별 파일로 저장
- 유연한 데이터 모델
- 문서, Key-Value, 그래프, 컬럼 기반 등 다양한 형태

**장점**
- 유연한 스키마
- 수평적 확장 용이
- 대용량 데이터 처리에 유리

**적합한 경우**
- 데이터 구조가 자주 변경될 때
- 비정형 데이터를 다룰 때
- 복잡한 문서나 리치 미디어 파일을 저장할 때

---

## 핵심 정리

**관계형 데이터베이스의 핵심**
- 테이블(행과 열)로 데이터 구조화
- 기본 키와 외래 키로 테이블 간 관계 설정
- SQL을 통한 선언적 데이터 조작

**RDBMS의 핵심 특징**
- ACID 속성으로 데이터 무결성 보장
- 정규화를 통한 데이터 중복 최소화
- 다중 사용자 동시 접근 지원

**언제 사용하는가?**
- 정형 데이터를 다룰 때
- 데이터 간 관계가 명확할 때
- 트랜잭션과 무결성이 중요할 때
- 복잡한 쿼리가 필요할 때

**관계형 DB의 위치**
- 대부분의 비즈니스 애플리케이션의 기반
- 전자상거래, 금융, ERP, CRM 등에서 필수적
- NoSQL과 함께 상황에 맞게 선택적으로 사용