# 관계형 DB 기본

## 관계형 데이터베이스(Relational Database)란?

**데이터를 테이블(표) 형태로 저장하고 관리하는 데이터베이스**

- 1970년 IBM의 에드거 F. 커드(Edgar F. Codd)가 처음 제안했으며, 현재 가장 널리 사용되는 데이터베이스 모델
- 엑셀 시트처럼 행과 열로 구성된 테이블에 데이터를 저장하고, 테이블 간의 관계를 통해 복잡한 데이터를 효율적으로 관리

**대표적인 관계형 DBMS:**
- MySQL
- PostgreSQL
- Oracle Database
- Microsoft SQL Server
- SQLite

## 관계형 데이터베이스의 기본 구조

### 1. 테이블 (Table, Relation)

**데이터를 저장하는 기본 단위** 행과 열로 구성된 2차원 표 형태.

**예시: 학생 테이블**

| 학번 | 이름 | 학과 | 학년 | 연락처 |
|------|------|------|------|--------|
| 2021001 | 김철수 | 컴퓨터공학 | 3 | 010-1234-5678 |
| 2021002 | 이영희 | 경영학 | 2 | 010-2345-6789 |
| 2021003 | 박민수 | 전자공학 | 4 | 010-3456-7890 |

### 2. 행 (Row, Tuple, Record)

**테이블의 가로줄로, 하나의 데이터 항목**

위 예시에서 "2021001, 김철수, 컴퓨터공학, 3, 010-1234-5678" 전체가 하나의 행입니다. 이를 튜플(Tuple) 또는 레코드(Record)라고도 부른다.

### 3. 열 (Column, Attribute, Field)

**테이블의 세로줄로, 데이터의 속성**

위 예시에서 "학번", "이름", "학과", "학년", "연락처"가 각각 열. 이를 속성(Attribute) 또는 필드(Field)라고도 부른다.

### 4. 도메인 (Domain)

**각 속성이 가질 수 있는 값의 범위**

- 학년 도메인: 1, 2, 3, 4 (정수)
- 이름 도메인: 문자열
- 학번 도메인: 7자리 숫자

각 열은 정해진 도메인의 값만 가질 수 있다.

### 5. 스키마 (Schema)

**데이터베이스의 구조와 제약조건을 정의한 것**

테이블의 이름, 속성, 데이터 타입, 제약조건 등을 포함

**학생 테이블 스키마:**
```
학생 (학번: VARCHAR(7) PRIMARY KEY,
     이름: VARCHAR(50) NOT NULL,
     학과: VARCHAR(50),
     학년: INT CHECK(학년 BETWEEN 1 AND 4),
     연락처: VARCHAR(13))
```

### 6. 인스턴스 (Instance)

**인스턴스는 특정 시점에 데이터베이스에 저장된 실제 데이터**

스키마는 구조를 정의한 것이고, 인스턴스는 그 구조에 실제로 들어있는 데이터. 시간이 지나면서 인스턴스는 계속 변하지만, 스키마는 거의 바뀌지 않는다.

## 키(Key)의 개념

**테이블에서 특정 행을 식별하거나 테이블 간의 관계를 맺는데 사용되는 속성**

### 1. 후보 키 (Candidate Key)

**튜플을 유일하게 식별할 수 있는 속성들의 집합**

**조건:**
- **유일성**: 하나의 키 값으로 튜플을 유일하게 식별할 수 있어야 한다
- **최소성**: 꼭 필요한 최소한의 속성으로만 구성되어야 한다

**예시: 학생 테이블**
- 학번 (유일하고 최소)
- 주민등록번호 (유일하고 최소)
- (이름, 학과, 학년) - 유일하지만 최소성을 만족하지 못함

학번과 주민등록번호가 후보 키.

### 2. 기본 키 (Primary Key, PK)

**후보 키 중에서 선택한 대표 키**.

**특징:**
- 테이블당 **하나만** 지정할 수 있다
- **NULL 값을 가질 수 없다**
- **중복된 값을 가질 수 없다**
- 테이블의 각 행을 유일하게 식별한다

**예시:**
```sql
CREATE TABLE 학생 (
    학번 VARCHAR(7) PRIMARY KEY,
    이름 VARCHAR(50),
    학과 VARCHAR(50)
);
```

보통 학번을 기본 키로 선택. 주민등록번호는 개인정보이므로 기본 키로 사용하지 않는 것이 좋다.

### 3. 대체 키 (Alternate Key)

**후보 키 중에서 기본 키로 선택되지 않은 나머지 키**.

학번을 기본 키로 선택했다면, 주민등록번호는 대체 키.

### 4. 슈퍼 키 (Super Key)

**유일성은 만족하지만 최소성은 만족하지 않는 키**.

**예시:**
- (학번) - 후보 키
- (학번, 이름) - 슈퍼 키 (유일하지만 이름이 불필요함)
- (학번, 이름, 학과) - 슈퍼 키

### 5. 외래 키 (Foreign Key, FK)

**다른 테이블의 기본 키를 참조하는 속성**. 테이블 간의 관계를 표현.

**예시:**

**학생 테이블**
| 학번(PK) | 이름 | 학과코드(FK) |
|---------|------|-------------|
| 2021001 | 김철수 | CS |
| 2021002 | 이영희 | BUS |

**학과 테이블**
| 학과코드(PK) | 학과명 |
|-------------|--------|
| CS | 컴퓨터공학 |
| BUS | 경영학 |

학생 테이블의 "학과코드"는 학과 테이블의 "학과코드"를 참조하는 외래 키.

**외래 키의 특징:**
- **참조 무결성**: 외래 키 값은 참조하는 테이블의 기본 키 값이어야 하거나 NULL이어야 한다
- 테이블 간의 관계를 명시적으로 표한다

```sql
CREATE TABLE 학생 (
    학번 VARCHAR(7) PRIMARY KEY,
    이름 VARCHAR(50),
    학과코드 VARCHAR(10),
    FOREIGN KEY (학과코드) REFERENCES 학과(학과코드)
);
```

## 무결성 제약조건 (Integrity Constraints)

무결성은 **데이터베이스에 저장된 데이터의 정확성과 일관성을 보장하는 것**

### 1. 개체 무결성 (Entity Integrity)

**기본 키는 NULL 값을 가질 수 없고, 중복될 수 없다**는 제약

**이유:**
- 기본 키는 각 행을 유일하게 식별해야 하는데, NULL이거나 중복되면 식별할 수 없다

### 2. 참조 무결성 (Referential Integrity)

**외래 키 값은 참조하는 테이블의 기본 키 값이어야 하거나 NULL이어야 한다**는 제약

### 3. 도메인 무결성 (Domain Integrity)

**각 속성 값은 정해진 도메인(값의 범위) 내의 값이어야 한다**는 제약
