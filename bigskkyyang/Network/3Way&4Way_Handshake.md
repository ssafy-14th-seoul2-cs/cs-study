# 3-Way/4-Way ν•Έλ“μ…°μ΄ν¬

## κ°μ”

- ν•Έλ“μ…°μ΄ν¬(Handshake)λ” λ‘ μ»΄ν“¨ν„°κ°€ λ„¤νΈμ›ν¬λ¥Ό ν†µν•΄ ν†µμ‹ μ„ μ‹μ‘ν•κ±°λ‚ μΆ…λ£ν•  λ• μ„λ΅ μ‹ νΈλ¥Ό μ£Όκ³ λ°›λ” κ³Όμ •μ΄λ‹¤. 
- λ§μΉ μ‚¬λλ“¤μ΄ λ§λ‚  λ• μ•…μλ¥Ό ν•λ” κ²ƒμ²λΌ, μ»΄ν“¨ν„°λ„ "μ—°κ²°ν• κ²μ”", "μ•κ² μµλ‹λ‹¤"λΌκ³  λ€ν™”λ¥Ό λ‚λ„λ” κ²ƒ.

μ΄ κ°λ…μ€ **TCP(Transmission Control Protocol)** ν”„λ΅ν† μ½μ—μ„ μ‚¬μ©λ¨.

---

## 3-Way Handshake (μ—°κ²° μλ¦½)

### κ°λ…
TCP μ—°κ²°μ„ **μ‹μ‘(μλ¦½)** ν•  λ• μ‚¬μ©ν•λ” λ°©λ²•μ΄λ‹¤. ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„κ°€ 3λ²μ λ©”μ‹μ§€λ¥Ό μ£Όκ³ λ°›μ•„ μ—°κ²°μ„ ν™•λ¦½ν•λ‹¤.

### κ³Όμ •

![3way-handshake](./image/3way-handshake.png)

#### λ‹¨κ³„λ³„ μ„¤λ…

**1λ‹¨κ³„: SYN (Synchronize)**
- ν΄λΌμ΄μ–ΈνΈκ°€ μ„λ²„μ—κ² μ—°κ²° μ”μ²­μ„ λ³΄λ‚Έλ‹¤
- "μ•λ…•ν•μ„Έμ”, μ—°κ²°ν•κ³  μ‹¶μµλ‹λ‹¤!" λΌλ” μλ―Έ
- μμ‹ μ μ΄κΈ° μμ„ λ²νΈ(Sequence Number)λ¥Ό ν•¨κ» λ³΄λ‚Έλ‹¤

**2λ‹¨κ³„: SYN-ACK (Synchronize-Acknowledge)**
- μ„λ²„κ°€ ν΄λΌμ΄μ–ΈνΈμ μ”μ²­μ„ λ°›μ•λ‹¤λ” ν™•μΈ μ‘λ‹µμ„ λ³΄λ‚Έλ‹¤
- "λ„¤, λ°›μ•μµλ‹λ‹¤! μ €λ„ μ—°κ²°ν•  μ¤€λΉ„κ°€ λμ–΄μ”!" λΌλ” μλ―Έ
- μ„λ²„λ„ μμ‹ μ μ΄κΈ° μμ„ λ²νΈλ¥Ό λ³΄λ‚Έλ‹¤

**3λ‹¨κ³„: ACK (Acknowledge)**
- ν΄λΌμ΄μ–ΈνΈκ°€ μ„λ²„μ μ‘λ‹µμ„ λ°›μ•λ‹¤κ³  μµμΆ… ν™•μΈμ„ λ³΄λ‚Έλ‹¤
- "ν™•μΈν–μµλ‹λ‹¤! μ΄μ  ν†µμ‹ μ„ μ‹μ‘ν•μ£ !" λΌλ” μλ―Έ
- μ΄μ λ¶€ν„° μ‹¤μ  λ°μ΄ν„° μ „μ†΅μ΄ κ°€λ¥ν•λ‹¤

### μ™ 3λ²μ΄λ‚ μ£Όκ³ λ°›λ”μ§€?

- **μ‹ λΆ°μ„± ν™•λ³΄**: μ–‘μ½ λ¨λ‘ λ°μ΄ν„°λ¥Ό μ£Όκ³ λ°›μ„ μ μλ”μ§€ ν™•μΈ
- **λ™κΈ°ν™”**: μ„λ΅μ μμ„ λ²νΈλ¥Ό κµν™ν•μ—¬ λ°μ΄ν„° μμ„λ¥Ό λ§μ¶¤
- **μ—°κ²° λ³΄μ¥**: μƒλ€λ°©μ΄ μ •λ§ ν†µμ‹  κ°€λ¥ν• μƒνƒμΈμ§€ ν™•μΈ

---

## π‘‹ 4-Way Handshake (μ—°κ²° μΆ…λ£)

### κ°λ…
TCP μ—°κ²°μ„ **μΆ…λ£**ν•  λ• μ‚¬μ©ν•λ” λ°©λ²•μ΄λ‹¤. ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„κ°€ 4λ²μ λ©”μ‹μ§€λ¥Ό μ£Όκ³ λ°›μ•„ μ•μ „ν•κ² μ—°κ²°μ„ λλ”λ‹¤.

### κ³Όμ •

![4way-handshake](./image/4way-handshake.png)

#### λ‹¨κ³„λ³„ μ„¤λ…

**1λ‹¨κ³„: FIN (Finish)**
- ν΄λΌμ΄μ–ΈνΈκ°€ μ„λ²„μ—κ² μ—°κ²° μΆ…λ£ μ”μ²­μ„ λ³΄λ‚Έλ‹¤
- "μ κ°€ λ³΄λ‚Ό λ°μ΄ν„°λ” λ‹¤ λ³΄λƒμ–΄μ”. μ΄μ  λλ‚Όκ²μ”!" λΌλ” μλ―Έ

**2λ‹¨κ³„: ACK (Acknowledge)**
- μ„λ²„κ°€ ν΄λΌμ΄μ–ΈνΈμ μΆ…λ£ μ”μ²­μ„ ν™•μΈν–λ‹¤κ³  μ‘λ‹µν•λ‹¤
- "λ„¤, μ•κ² μµλ‹λ‹¤. μ μ‹λ§μ”, μ κ°€ λ³΄λ‚Ό λ°μ΄ν„°κ°€ λ‚¨μ•„μμ–΄μ”!" λΌλ” μλ―Έ
- μ„λ²„λ” μ•„μ§ λ³΄λ‚Ό λ°μ΄ν„°κ°€ μμ„ μ μλ‹¤

**3λ‹¨κ³„: FIN (Finish)**
- μ„λ²„κ°€ λ‚¨μ€ λ°μ΄ν„°λ¥Ό λ¨λ‘ λ³΄λ‚Έ ν›„, μΆ…λ£ μ¤€λΉ„κ°€ λμ—λ‹¤κ³  μ•λ¦°λ‹¤
- "μ €λ„ μ΄μ  λ‹¤ λ³΄λƒμµλ‹λ‹¤. μ΄μ  λλ‚΄λ„ λΌμ”!" λΌλ” μλ―Έ

**4λ‹¨κ³„: ACK (Acknowledge)**
- ν΄λΌμ΄μ–ΈνΈκ°€ μ„λ²„μ μΆ…λ£ μ”μ²­μ„ ν™•μΈν–λ‹¤κ³  μµμΆ… μ‘λ‹µν•λ‹¤
- "ν™•μΈν–μµλ‹λ‹¤! μ™„μ „ν μΆ…λ£ν• κ²μ”!" λΌλ” μλ―Έ
- μ΄μ  μ—°κ²°μ΄ μ™„μ „ν μΆ…λ£λλ‹¤

### μ™ 4λ²μ΄λ‚ μ£Όκ³ λ°›λ”μ§€?

- **μ–‘λ°©ν–¥ μ—°κ²°**: TCPλ” μ–‘λ°©ν–¥ ν†µμ‹ μ΄λ―€λ΅ κ° λ°©ν–¥μ„ λ”°λ΅ μΆ…λ£ν•΄μ•Ό ν•¨
- **λ°μ΄ν„° λ³΄μ¥**: μ„λ²„κ°€ μ•„μ§ λ³΄λ‚Ό λ°μ΄ν„°κ°€ λ‚¨μ•„μμ„ μ μμ–΄μ„ μ‹κ°„μ΄ ν•„μ”
- **μ•μ „ν• μΆ…λ£**: λ¨λ“  λ°μ΄ν„°κ°€ μ λ€λ΅ μ „μ†΅λμ—λ”μ§€ ν™•μΈ ν›„ μΆ…λ£

---

## π” λΉ„κµ μ •λ¦¬

| κµ¬λ¶„ | 3-Way Handshake | 4-Way Handshake |
|------|----------------|----------------|
| **λ©μ ** | μ—°κ²° μλ¦½ (μ‹μ‘) | μ—°κ²° μΆ…λ£ (λ) |
| **λ‹¨κ³„** | 3λ‹¨κ³„ | 4λ‹¨κ³„ |
| **λ©”μ‹μ§€** | SYN β†’ SYN+ACK β†’ ACK | FIN β†’ ACK β†’ FIN β†’ ACK |
| **μ†μ” μ‹κ°„** | μ§§μ | μ΅°κΈ λ” κΉ€ |
| **νΉμ§•** | λΉ λ¥Έ μ—°κ²° μλ¦½ | μ•μ „ν• μ—°κ²° μΆ…λ£ |

---

## μ¶”κ°€λ΅ μƒκ°ν•  λ¶€λ¶„

**Q1. μ™ μ—°κ²°ν•  λ•λ” 3λ²μΈλ° λμ„ λ•λ” 4λ²μΈμ§€?**
- μ—°κ²°ν•  λ•: μ„λ²„κ°€ SYNκ³Ό ACKλ¥Ό ν• λ²μ— λ³΄λ‚Ό μ μμ–΄μ„ 3λ²
- μΆ…λ£ν•  λ•: μ„λ²„κ°€ μ•„μ§ λ³΄λ‚Ό λ°μ΄ν„°κ°€ μμ„ μ μμ–΄μ„ ACKμ™€ FINμ„ λ”°λ΅ λ³΄λ‚΄μ•Ό ν•λ―€λ΅ 4λ²

**Q2. ν•Έλ“μ…°μ΄ν¬κ°€ μ‹¤ν¨ν•λ©΄?**
- μΌμ • μ‹κ°„ ν›„ μ¬μ‹λ„(Retry)
- μ—¬λ¬ λ² μ‹¤ν¨ν•λ©΄ μ—°κ²° μ‹¤ν¨λ΅ μ²λ¦¬λλ‹¤.

---
