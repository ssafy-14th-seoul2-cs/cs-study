# NAT, VPN, λ°©ν™”λ²½

## κ°μ”

μΈν„°λ„·μ„ μ‚¬μ©ν•  λ• μ°λ¦¬λ¥Ό λ³΄νΈν•κ³ , ν¨μ¨μ μΌλ΅ μ—°κ²°ν•΄μ£Όλ” 3κ°€μ§€ κΈ°μ 

- **NAT**: IP μ£Όμ†λ¥Ό λ³€ν™ν•΄μ£Όλ” κΈ°μ 
- **VPN**: μ•μ „ν• ν†µμ‹ μ„ μ„ν• κ°€μƒ μ‚¬μ„¤λ§
- **λ°©ν™”λ²½**: λ„¤νΈμ›ν¬λ¥Ό μ§€ν‚¤λ” λ³΄μ• μ‹μ¤ν…

---

## NAT (Network Address Translation)

### κ°λ…

**λ„¤νΈμ›ν¬ μ£Όμ† λ³€ν™** κΈ°μ 
μ‰½κ² λ§ν•΄, IP μ£Όμ†λ¥Ό λ‹¤λ¥Έ IP μ£Όμ†λ΅ λ°”κΏ”μ£Όλ” κ²ƒ

### ν•„μ”μ„±

#### λ¬Έμ  μƒν™©
- IPv4 μ£Όμ†μ λ¶€μ΅± (μ•½ 43μ–µ κ°λ°–μ— μ—†μ)
- μ „ μ„Έκ³„ λ¨λ“  κΈ°κΈ°μ— κ³µμΈ IPλ¥Ό μ¤„ μ μ—†μ

#### ν•΄κ²°μ±…
- μ§‘ λ‚΄λ¶€μ—μ„λ” **μ‚¬μ„¤ IP** μ‚¬μ©
- μΈν„°λ„·μ— λ‚κ° λ•λ” **κ³µμΈ IP**λ΅ λ³€ν™
- ν•λ‚μ κ³µμΈ IPλ΅ μ—¬λ¬ κΈ°κΈ° μ‚¬μ© κ°€λ¥!

### λ™μ‘ λ°©μ‹

```
[μ§‘ μ• - μ‚¬μ„¤ IP]              [κ³µμ κΈ° - NAT]              [μΈν„°λ„· - κ³µμΈ IP]

PC: 192.168.0.2                                          
μ¤λ§νΈν°: 192.168.0.3     ----β†’  [NAT λ³€ν™]  ----β†’     118.235.x.x
λ…ΈνΈλ¶: 192.168.0.4                                     (ν•λ‚μ κ³µμΈ IP)
```

![NAT](./image/NAT.png)

### NATμ μ¥λ‹¨μ 

**μ¥μ **
- IP μ£Όμ† μ μ•½ (μ—¬λ¬ κΈ°κΈ°κ°€ ν•λ‚μ κ³µμΈ IP μ‚¬μ©)
- λ³΄μ• ν–¥μƒ (λ‚΄λ¶€ κµ¬μ΅° μ¨κΉ€)
- λ„¤νΈμ›ν¬ κ΄€λ¦¬ νΈλ¦¬

**λ‹¨μ **
- μ™Έλ¶€μ—μ„ λ‚΄λ¶€λ΅ μ§μ ‘ μ ‘μ† μ–΄λ ¤μ›€
- P2P ν†µμ‹  λ¬Έμ 
- μ„±λ¥ μ¤λ²„ν—¤λ“ (μ£Όμ† λ³€ν™ μ²λ¦¬ ν•„μ”)

---

## VPN (Virtual Private Network)

### κ°λ…

**κ°€μƒ μ‚¬μ„¤λ§**
κ³µμ© μΈν„°λ„·μ„ λ§μΉ μ „μ©μ„ μ²λΌ μ•μ „ν•κ² μ‚¬μ©ν•  μ μκ² ν•¨

### ν•„μ”μ„±

#### λ¬Έμ  μƒν™©
- κ³µμ© μ™€μ΄νμ΄λ” ν•΄ν‚Ή μ„ν—μ΄ μμ
- νμ‚¬ μλ£λ¥Ό μ§‘μ—μ„ μ•μ „ν•κ² μ ‘κ·Όν•κ³  μ‹¶λ‹¤λ©΄
- νΉμ • μ§€μ—­μ—μ„ μ°¨λ‹¨λ μ‚¬μ΄νΈμ— μ ‘μ†ν•κ³  μ‹¶λ‹¤λ©΄
- λ‚΄ μΈν„°λ„· ν™λ™μ„ μ¨κΈ°κ³  μ‹¶λ‹¤λ©΄

#### ν•΄κ²°μ±…
VPNμ„ μ‚¬μ©ν•λ©΄:
- λ°μ΄ν„°λ¥Ό μ•”νΈν™”ν•΄μ„ μ „μ†΅
- λ‚΄ μ„μΉλ¥Ό μ¨κΈΈ μ μμ
- μ•μ „ν•κ² νμ‚¬ λ„¤νΈμ›ν¬ μ ‘μ† κ°€λ¥

### λ™μ‘ λ°©μ‹

![VPN](./image/VPN.png)

**λ‹¨κ³„λ³„ μ„¤λ…**

```
1λ‹¨κ³„: VPN μ—°κ²° μ”μ²­
[μ‚¬μ©μ] β†’ [VPN ν΄λΌμ΄μ–ΈνΈ] β†’ [VPN μ„λ²„]
"μ•μ „ν•κ² μ—°κ²°ν•κ³  μ‹¶μ–΄μ”!"

2λ‹¨κ³„: μΈμ¦ λ° ν„°λ„ μƒμ„±
[VPN μ„λ²„] β†’ μ‚¬μ©μ μΈμ¦ β†’ μ•”νΈν™” ν„°λ„ μƒμ„± π”’

3λ‹¨κ³„: λ°μ΄ν„° μ „μ†΅
[μ‚¬μ©μ] 
   β†“ μ›λ³Έ λ°μ΄ν„°
[μ•”νΈν™”] π”’
   β†“ μ•”νΈν™”λ λ°μ΄ν„°
[VPN ν„°λ„] 
   β†“ 
[VPN μ„λ²„]
   β†“ λ³µνΈν™”
[μΈν„°λ„·] 
   β†“
[λ©μ μ§€]
```

### VPNμ μΆ…λ¥

#### 1οΈβƒ£ μ›κ²© μ ‘μ† VPN (Remote Access VPN)
```
μ¬νƒκ·Όλ¬΄μ ---(VPN)--β†’ νμ‚¬ λ„¤νΈμ›ν¬
```
- μ§‘μ—μ„ νμ‚¬ λ„¤νΈμ›ν¬μ— μ ‘μ†
- κ°μΈ μ‚¬μ©μκ°€ κ°€μ¥ λ§μ΄ μ‚¬μ©

#### 2οΈβƒ£ μ‚¬μ΄νΈ κ°„ VPN (Site-to-Site VPN)
```
λ³Έμ‚¬ λ„¤νΈμ›ν¬ ---(VPN)--β†’ μ§€μ‚¬ λ„¤νΈμ›ν¬
```
- λ‘ λ„¤νΈμ›ν¬λ¥Ό μ•μ „ν•κ² μ—°κ²°
- κΈ°μ—…μ—μ„ μ£Όλ΅ μ‚¬μ©

### VPN ν”„λ΅ν† μ½

μ£Όμ” VPN ν”„λ΅ν† μ½λ“¤:

| ν”„λ΅ν† μ½ | νΉμ§• | μ†λ„ | λ³΄μ• |
|---------|------|------|------|
| **PPTP** | μ¤λλ¨, μ„¤μ • μ‰¬μ›€ | β­β­β­ | β­ |
| **L2TP/IPSec** | μ•μ •μ , λ„λ¦¬ μ‚¬μ© | β­β­ | β­β­β­ |
| **OpenVPN** | μ¤ν”μ†μ¤, λ§¤μ° μ•μ „ | β­β­ | β­β­β­β­β­ |
| **WireGuard** | μµμ‹ , λΉ λ¥΄κ³  μ•μ „ | β­β­β­β­β­ | β­β­β­β­β­ |

### VPNμ μ¥λ‹¨μ 

**μ¥μ **
- κ°•λ ¥ν• μ•”νΈν™”λ΅ λ³΄μ• κ°•ν™”
- μµλ…μ„± λ³΄μ¥ (IP μ£Όμ† μ¨κΉ€)
- μ§€μ—­ μ ν• μ°ν κ°€λ¥
- κ³µμ© μ™€μ΄νμ΄μ—μ„ μ•μ „

**λ‹¨μ **
- μ†λ„κ°€ λλ ¤μ§ μ μμ (μ•”νΈν™” μ²λ¦¬)
- λΉ„μ©μ΄ λ“¤ μ μμ (μ λ£ VPN)
- μΌλ¶€ μ„λΉ„μ¤μ—μ„ μ°¨λ‹¨λ  μ μμ

---

## λ°©ν™”λ²½ (Firewall)

### κ°λ…

**λ„¤νΈμ›ν¬ λ³΄μ• μ‹μ¤ν…**
ν¨ν‚·μ„ κ²€μ‚¬ν•΄μ„ ν—κ°€λ κ²ƒλ§ ν†µκ³Όμ‹ν‚΄

### ν•„μ”μ„±

#### λ¬Έμ  μƒν™©
- ν•΄μ»¤μ κ³µκ²© μ‹λ„
- μ•…μ„±μ½”λ“ μ ν¬
- λ¬΄λ‹¨ μ ‘κ·Ό μ‹λ„
- DDoS κ³µκ²©

#### ν•΄κ²°μ±…
- λ“¤μ–΄μ¤κ³  λ‚κ°€λ” νΈλν”½ κ°μ‹
- μ„ν—ν• ν¨ν‚· μ°¨λ‹¨
- ν—κ°€λ νΈλν”½λ§ ν†µκ³Ό

### λ™μ‘ λ°©μ‹

```
[μ™Έλ¶€ μΈν„°λ„·]
      β†“
      β†“ λ¨λ“  ν¨ν‚·
      β†“
[λ°©ν™”λ²½] β† κ·μΉ™(Rule) μ μ©
      β†“
      β”β”€β†’ β… ν—μ© β†’ [λ‚΄λ¶€ λ„¤νΈμ›ν¬]
      β”‚
      β””β”€β†’ β μ°¨λ‹¨ β†’ λ²„λ¦Ό
```

### λ°©ν™”λ²½ μΆ…λ¥

#### 1οΈβƒ£ ν¨ν‚· ν•„ν„°λ§ λ°©ν™”λ²½ (Packet Filtering)

κ°€μ¥ κΈ°λ³Έμ μΈ λ°©ν™”λ²½

```
[ν¨ν‚· κ²€μ‚¬ ν•­λ©]
- μ¶λ°μ§€ IP μ£Όμ†
- λ©μ μ§€ IP μ£Όμ†
- ν¬νΈ λ²νΈ
- ν”„λ΅ν† μ½ (TCP/UDP)

μμ‹:
β… μ¶λ°μ§€ 192.168.0.2 β†’ λ©μ μ§€ 8.8.8.8:80 (ν—μ©)
β μ¶λ°μ§€ 1.2.3.4 β†’ λ©μ μ§€ λ‚΄λ¶€μ„λ²„:22 (μ°¨λ‹¨)
```

**μ¥μ **
- λΉ λ¥Έ μ²λ¦¬ μ†λ„
- κ°„λ‹¨ν• κµ¬μ΅°

**λ‹¨μ **
- ν¨ν‚· λ‚΄μ©μ€ ν™•μΈ λ» ν•¨
- μ •κµν• κ³µκ²© λ§‰κΈ° μ–΄λ ¤μ›€

#### 2οΈβƒ£ μƒνƒ κΈ°λ° λ°©ν™”λ²½ (Stateful Inspection)

μ—°κ²° μƒνƒκΉμ§€ ν™•μΈ

```
[μ—°κ²° μƒνƒ ν…μ΄λΈ”]
μ¶λ°μ§€ | λ©μ μ§€ | μƒνƒ | μ‹κ°„
192.168.0.2:5000 | 8.8.8.8:80 | ESTABLISHED | 10:30
192.168.0.3:6000 | 1.1.1.1:443 | SYN_SENT | 10:31

- κΈ°μ΅΄ μ—°κ²°μ μ‘λ‹µ ν¨ν‚·μΈμ§€ ν™•μΈ
- μƒλ΅μ΄ μ—°κ²° μ‹λ„μΈμ§€ ν™•μΈ
- λΉ„μ •μƒμ μΈ ν¨ν‚· μ°¨λ‹¨
```

**μ¥μ **
- λ” μ •κµν• λ³΄μ•
- μ—°κ²° νλ¦„ μ¶”μ  κ°€λ¥

**λ‹¨μ **
- μ²λ¦¬ μ†λ„ μ΅°κΈ λλ¦Ό
- λ©”λ¨λ¦¬ μ‚¬μ©λ‰ μ¦κ°€

#### 3οΈβƒ£ μ• ν”λ¦¬μΌ€μ΄μ… λ°©ν™”λ²½ (Application-Level)

ν¨ν‚· λ‚΄μ©κΉμ§€ κΉκ² κ²€μ‚¬

```
[κ²€μ‚¬ λ‚΄μ©]
- HTTP μ”μ²­ λ‚΄μ©
- SQL μΈμ μ… μ‹λ„
- μ•…μ„± μ¤ν¬λ¦½νΈ
- νμΌ μ—…λ΅λ“ κ²€μ¦

μμ‹:
β GET /admin.php?id=1' OR '1'='1 (SQL μΈμ μ… μ°¨λ‹¨)
β <script>alert('hack')</script> (XSS κ³µκ²© μ°¨λ‹¨)
β… GET /index.html (μ •μƒ μ”μ²­ ν—μ©)
```

**μ¥μ **
- κ°€μ¥ κ°•λ ¥ν• λ³΄μ•
- μ• ν”λ¦¬μΌ€μ΄μ… λ λ²¨ κ³µκ²© λ°©μ–΄

**λ‹¨μ **
- μ²λ¦¬ μ†λ„ κ°€μ¥ λλ¦Ό
- μ„¤μ •μ΄ λ³µμ΅ν•¨

#### 4οΈβƒ£ μ°¨μ„Έλ€ λ°©ν™”λ²½ (NGFW - Next Generation Firewall)

λ¨λ“  κΈ°λ¥μ„ ν•©μΉ μµμ‹  λ°©ν™”λ²½

```
[ν†µν•© κΈ°λ¥]
β… ν¨ν‚· ν•„ν„°λ§
β… μƒνƒ κΈ°λ° κ²€μ‚¬
β… μ• ν”λ¦¬μΌ€μ΄μ… μ μ–΄
β… μΉ¨μ… νƒμ§€/λ°©μ§€ (IPS)
β… μ•ν‹°λ°”μ΄λ¬μ¤
β… URL ν•„ν„°λ§
β… SSL/TLS λ³µνΈν™”
```

### λ°©ν™”λ²½ κµ¬μ„± λ°©μ‹

#### λ„¤νΈμ›ν¬ λ°©ν™”λ²½
```
[μΈν„°λ„·] β†β†’ [λ°©ν™”λ²½] β†β†’ [λ‚΄λ¶€ λ„¤νΈμ›ν¬]
              (ν•λ“μ›¨μ–΄)
```
- μ „μ²΄ λ„¤νΈμ›ν¬ λ³΄νΈ
- κΈ°μ—…μ—μ„ μ‚¬μ©

#### νΈμ¤νΈ λ°©ν™”λ²½
```
[λ‚΄ μ»΄ν“¨ν„°]
    β””β”€ λ°©ν™”λ²½ (μ†ν”„νΈμ›¨μ–΄)
```
- κ°λ³„ μ»΄ν“¨ν„° λ³΄νΈ
- Windows λ°©ν™”λ²½, Mac λ°©ν™”λ²½

### DMZ (DeMilitarized Zone)

νΉλ³„ν• λ³΄μ• μμ—­μ΄μ•Ό!

```
[μΈν„°λ„·]
    β†“
[μ™Έλ¶€ λ°©ν™”λ²½]
    β†“
[DMZ] β† μ›Ήμ„λ²„, λ©”μΌμ„λ²„ (μ™Έλ¶€ κ³µκ°)
    β†“
[λ‚΄λ¶€ λ°©ν™”λ²½]
    β†“
[λ‚΄λ¶€ λ„¤νΈμ›ν¬] β† DBμ„λ²„, μ—…λ¬΄ μ„λ²„ (λ³΄νΈλ¨)
```

**DMZμ λ©μ **
- μ™Έλ¶€μ— κ³µκ°ν•  μ„λ²„μ™€ λ‚΄λ¶€ μ„λ²„ λ¶„λ¦¬
- μ΄μ¤‘ λ°©ν™”λ²½μΌλ΅ λ³΄μ• κ°•ν™”
- μ›Ήμ„λ²„κ°€ ν•΄ν‚Ήλ‹Ήν•΄λ„ λ‚΄λ¶€λ” μ•μ „

---