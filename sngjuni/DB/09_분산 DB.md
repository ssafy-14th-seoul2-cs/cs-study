# 분산 DB

## 분산 데이터베이스 (Distributed Database)

---

**정의**

- **여러 물리적 노드(서버)** 에 데이터가 분산되어 저장·관리되지만, 사용자에게는 **하나의 통합된 데이터베이스처럼 보이도록 구성된 시스템**
- 네트워크로 연결된 여러 DB 인스턴스가 **논리적으로 하나의 DBMS처럼 작동**함

---

**핵심 내용**

1. **구성 요소**
    - **분산 데이터베이스 시스템(DDBS)**: 분산된 DB를 통합적으로 관리하는 소프트웨어 계층
    - **로컬 DB(Local DB)**: 각 노드에 존재하며, 실제 데이터를 저장·관리
    - **통신 네트워크**: 노드 간 데이터 요청과 트랜잭션 수행을 중계
2. **분산 DB의 투명성(Transparency)**
    - **분할 투명성(Fragmentation Transparency)**
        
        → 데이터가 여러 노드에 분할되어 있어도 사용자는 하나의 테이블처럼 접근 가능
        
    - **위치 투명성(Location Transparency)**
        
        → 데이터의 저장 위치를 몰라도 질의 가능
        
    - **복제 투명성(Replication Transparency)**
        
        → 데이터 복제본이 여러 개 존재하더라도 일관된 데이터처럼 접근 가능
        
    - **병행 투명성(Concurrency Transparency)**
        
        → 여러 노드에서 동시에 트랜잭션이 수행되어도 일관성 유지
        
3. **데이터 분할 방식**
    - **수평 분할(Horizontal Fragmentation)**
        
        → 테이블의 행(row)을 조건별로 나누어 여러 서버에 분산 저장
        
        → 예: `회원ID < 10000 → 서울 서버`, `≥ 10000 → 부산 서버`
        
    - **수직 분할(Vertical Fragmentation)**
        
        → 컬럼(column) 단위로 분리하여 필요한 속성만 각 서버에 저장
        
        → 예: 개인정보는 서울, 거래정보는 부산
        
    - **혼합 분할(Hybrid Fragmentation)**
        
        → 수평 + 수직 분할 병행
        
4. **분산 트랜잭션 관리**
    - **2단계 커밋 프로토콜(2PC, Two-Phase Commit)**
        - 여러 노드에서 트랜잭션을 수행할 때, **모두 커밋 or 모두 롤백** 보장
        - ① Prepare 단계: 각 노드에 커밋 준비 요청
        - ② Commit 단계: 모든 노드가 OK 응답 시 전체 커밋, 아니면 전체 롤백
    - **3단계 커밋(3PC)**
        - 2PC에서의 장애 복구 문제를 보완하여, 타임아웃 시 자동 롤백 가능

---

**특징**

- 물리적으로 분산되어 있지만 논리적으로 통합된 데이터베이스
- **확장성(Scalability)** 과 **가용성(Availability)** 이 뛰어남
- 장애가 발생해도 다른 노드가 **서비스 지속(Failover)** 가능

---

**장단점**

- **장점**
    - 시스템 확장성 및 가용성 향상
    - 네트워크 장애 시에도 부분적 서비스 가능
    - 지역별 데이터 분산 처리로 응답 시간 단축
- **단점**
    - 트랜잭션 관리 복잡 (2PC로 인한 지연 가능성)
    - 데이터 일관성 유지 비용 증가
    - 네트워크 통신에 따른 성능 저하

---

## 관련 면접 질문

- 분산 데이터베이스란 무엇인가요?
    - 여러 서버에 데이터를 분산 저장하면서, 사용자에게는 하나의 통합된 데이터베이스처럼 보이도록 구성된 시스템입니다.
- 분할 방식에는 어떤 것이 있나요?
    - 수평 분할(행 기준), 수직 분할(컬럼 기준), 혼합 분할이 있습니다.
- 2단계 커밋(2PC)의 역할은 무엇인가요?
    - 여러 노드가 동시에 참여하는 트랜잭션에서 전체 커밋 또는 전체 롤백을 보장해 일관성을 유지합니다.
- 분산 DB의 단점은 무엇인가요?
    - 트랜잭션 관리가 복잡하고, 노드 간 통신 지연으로 인해 성능이 저하될 수 있습니다.