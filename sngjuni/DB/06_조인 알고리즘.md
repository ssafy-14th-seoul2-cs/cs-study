# 조인 알고리즘

### 조인 알고리즘 (Join Algorithm)

---

**정의**

- 관계형 데이터베이스에서 **두 개 이상의 테이블을 결합(Join)** 하여 하나의 결과 집합을 만드는 과정
- 조인 알고리즘은 이 결합을 **어떻게 효율적으로 수행할지**를 결정하는 **실행 방식**

---

**핵심 내용**

1. **조인의 필요성**
    - 데이터가 여러 테이블에 분리되어 있을 때, 공통 컬럼을 기준으로 결합하여 의미 있는 정보를 추출
    - 효율적인 조인 알고리즘 선택은 **쿼리 성능 최적화의 핵심 요인**
2. **조인 알고리즘의 종류**
    
    
    | 알고리즘 | 동작 방식 | 장점 | 단점 | 사용 사례 |
    | --- | --- | --- | --- | --- |
    | **Nested Loop Join** | 한 테이블의 각 행마다 다른 테이블 전체를 탐색 | 구조 단순, 소규모 데이터에 적합 | 대용량 시 매우 느림 | 인덱스 조인, 소량 데이터 |
    | **Hash Join** | 조인 키 기준으로 해시 테이블 생성 후 비교 | 비인덱스 조인에서도 빠름 | 해시 테이블 메모리 사용량 큼 | 대용량 조인, DW 시스템 |
    | **Sort-Merge Join** | 두 테이블을 정렬한 뒤 병합 | 정렬된 데이터에 효율적 | 정렬 비용 발생 | 정렬 기반 조인, 외부조인 |
    | **Index Nested Loop Join** | 내부 테이블에 인덱스 존재 시 빠른 탐색 | 인덱스 기반으로 빠름 | 인덱스 없으면 느림 | PK-FK 관계 조인 |
3. **알고리즘 선택 기준**
    - **데이터 크기**: 소규모면 Nested Loop, 대규모면 Hash 또는 Sort-Merge
    - **인덱스 유무**: 인덱스가 있으면 Nested Loop 효율적
    - **메모리 사용량**: Hash Join은 빠르지만 메모리 부담 큼
    - **정렬 여부**: 이미 정렬된 데이터면 Sort-Merge Join 유리
4. **DBMS 최적화**
    - 대부분의 RDBMS는 **쿼리 옵티마이저(Query Optimizer)** 가 상황에 따라 가장 효율적인 조인 방식을 자동 선택
    - 인덱스, 통계정보, 데이터 분포에 따라 실행 계획이 달라짐

---

**특징**

- 조인 알고리즘은 **쿼리 실행 시간에 직접적인 영향을 미침**
- **Nested Loop → Hash → Sort-Merge** 순으로 데이터 규모에 따라 효율이 달라짐
- 옵티마이저가 항상 최적을 고르지 못할 수 있으므로, 실행 계획 분석(`EXPLAIN`)을 통해 확인 필요

---

**장단점**

- **장점**
    - 여러 테이블의 데이터를 결합해 풍부한 결과 생성 가능
    - 인덱스 및 알고리즘 최적화를 통해 대규모 데이터 처리 가능
- **단점**
    - 비효율적인 조인은 심각한 성능 저하 초래
    - 조인 순서와 인덱스 구성에 따라 성능 차이가 큼

---

## 관련 면접 질문

- 조인 알고리즘이란 무엇인가요?
    - 두 테이블을 결합할 때 데이터를 비교·매칭하는 방식으로, 쿼리 성능에 큰 영향을 미치는 핵심 요소입니다.
- Nested Loop Join의 단점은 무엇인가요?
    - 모든 행을 반복 탐색하므로 데이터가 많을 경우 성능이 급격히 저하됩니다.
- Hash Join은 언제 유리한가요?
    - 인덱스가 없고, 대용량 테이블 간 조인 시 빠른 탐색이 가능합니다.
- 쿼리 옵티마이저의 역할은 무엇인가요?
    - 데이터 양, 인덱스 여부 등을 고려해 가장 효율적인 조인 방식을 자동 선택하는 역할을 합니다.