## 조인 알고리즘(Join Algorithm)

1. **정의**

- SQL에서 두 테이블을 결합하는 연산
- 실제로는 DBMS 내부에서 물리적 조인 알고리즘 이용해 구현
    - DBMS는 쿼리 최적화기(Query Optimizer)가 각 알고리즘의 비용(연산량, I/O, 메모리)을 계산해 가장 효율적인 방법을 자동 선택

2. **주요 조인 알고리즘**

- Nested Loop Join (중첩 루프 조인)
    - 가장 기본적이고 단순한 방식
    - 한 테이블의 각 행을 기준으로 다른 테이블 전체를 순차 비교 → 모든 조합을 검사하며 조건 맞으면 출력
    - 특징
        - 구현 단순, 비효율적 (O(M*N))
        - 한쪽 테이블이 매우 작거나, 상대 테이블에 인덱스 있을 때 효율적
- Sort-Merge Join (정렬 병합 조인)
    - 두 테이블을 조인 키 기준으로 정렬한 뒤, 정렬된 상태에서 병합하면서 매칭되는 행 결합
    - 특징
        - 정렬된 데이터라면 매우 빠름 (순차 접근)
        - 등가 조인(=) 뿐 아니라 비등가조인(<, >)도 가능
        - 정렬 비용 존재하지만, 이미 인덱스로 정렬되어 있다면 효율적
- Hash Join (해시 조인)
    - 한쪽 테이블(보통 작은 쪽)을 해시 테이블로 빌드하고, 다른 테이블의 데이터를 순회하면서 같은 해시 키를 빠르게 탐색하는 방식
    - 특징
        - 등가조인(=)에만 사용 가능
        - 정렬 불필요, 순차 접근 중심 → 대용량에 효율적
        - 해시 테이블을 메모리에 만들어야 하므로, 메모리 사용량 많음

3. DBMS의 조인 알고리즘 선택 기준
    
    | 기준 | 설명 | 선택되는 알고리즘 예시 |
    | --- | --- | --- |
    | 테이블 크기 | 한쪽이 매우 작음 | Nested Loop Join |
    | 인덱스 존재 | 조인 키 인덱스 있음 | Index Nested Loop Join |
    | 정렬 상태 | 이미 정렬되어 있음 | Sort-Merge Join |
    | 조인 조건 | 등가(=) | Hash Join |
    | 메모리 여유 | 충분함 | Hash Join |
    | OLTP(소규모 트랜잭션) | 실시간 처리 | Nested Loop Join |
    | OLAP(대용량 분석) | 대규모 스캔 | Sort-Merge / Hash Join |