# NAT, VPN, 방화벽

## NAT (Network Address Translation)

**1. 개념**

- 네트워크 주소 변환
- 내부 네트워크와 외부 네트워크 사이에서 주소를 바꿔주는 기술
    
**2. 필요성**

- IPv4 주소는 한정적 → 하나의 공인 IP로 여러 사설 IP를 연결하기 위해 NAT 사용

**3. 작동 원리**

- 내부 PC가 외부로 패킷 보냄
- NAT 장치(공유기)는 내부 IP를 자신의 공인 IP로 바꾸고, 연결 정보를 매핑 테이블에 저장
- 외부 서버는 응답을 공인 IP로 보냄
- NAT가 매핑 테이블을 참고해 원래의 내부 주소로 다시 변환해 전달

**4. 종류**

- Static NAT : 내부 IP와 외부 IP를 1:1로 고정 매핑
- Dynamic NAT : 여러 개의 외부 IP 중에서 자동으로 할당
- PAT(Port Address Translation) : 하나의 공인 IP에 포트 번호로 여러 내부 IP를 구분 (가정용 공유기)

**5. 장점 & 단점**

- 장점
    - 공인 IP 절약
    - 내부 IP 숨김 → 보안성 향상
- 단점
    - P2P, VolP 등 직접 연결 어려움
    - 연결 추적/로그 복잡

## VPN (Virtual Private Network)

**1. 개념**

- 가상의 사설 네트워크
- 인터넷 같은 공공 네트워크 이용, 암호화된 터널 만들어 안전하게 통신

**2. 작동 방식**

- VPN 클라이언트가 VPN 서버와 암호화된 연결(터널) 맺음
- 이후의 모든 데이터는 암호화되어 전송 → 제3자가 중간에서 봐도 내용 알 수 없음
- 사용자는 마치 내부 네트워크 안에 있는 것처럼 접근 가능

**3. 주요 프로토콜**

- PPTP : 오래된 방식, 보안 역할
- L2TP/IPsec : 암호화 강화, 안정적
- OpenVPN : SSL 기반, 오픈소스, 많이 사용
- WireGuard : 최신 기술, 빠르고 단순

**4. 장점**

- 데이터 암호화 → 보안 강화
- 공용 Wi-Fi에서도 안전
- 내부 자원 접근 가능 (원격 근무)
- 지역 제한 우회 (ex. 해외 접속)

## 방화벽 (Firewall)

**1. 개념**

- 네트워크 공격이나 비인가 접근을 차단하는 장치

**2. 필요성**

- 모든 연결 허용하면 해킹, 악성 코드, 무단 접근 등의 위험 → 방화벽이 허용할 것과 차단할 것 구분

**3. 동작 방식**

- 패킷 검사를 통해 트래픽 허용하거나 차단
- 기본 원리
    - 허용 규칙 (Allow rule) : 특정 IP, 포트, 프로토콜만 통과
    - 차단 규칙 (Deny rule) : 그 외는 막음

**4. 종류**

- 패킷 필터링 방화벽 : IP/포트 기반 단순 검사
- 상태 기반 검사(Stateful) : 연결 상태 추적하여 합법적 세션만 허용
- 프록시 방화벽 : 중계 역할, 내부 IP 숨김
- 차세대 방화벽(NGFW) : 애플리케이션, 사용자, 콘텐츠까지 분석

**5. 장점**

- 해킹, 악성 코드 차단
- 내부 자원 보호
- 접근 제어 정책 적용 가능
